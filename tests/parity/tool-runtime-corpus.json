{
  "cases": [
    {
      "name": "write-direct",
      "request": {
        "request_id": "cp3-direct-write-1",
        "session_id": "cp3-direct",
        "tool_name": "write",
        "args": {
          "path": "direct.txt",
          "content": "alpha\nline2\n"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed"
      }
    },
    {
      "name": "read-direct",
      "request": {
        "request_id": "cp3-direct-read-1",
        "session_id": "cp3-direct",
        "tool_name": "read",
        "args": {
          "path": "direct.txt"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "alpha"
      }
    },
    {
      "name": "edit-direct",
      "request": {
        "request_id": "cp3-direct-edit-1",
        "session_id": "cp3-direct",
        "tool_name": "edit",
        "args": {
          "path": "direct.txt",
          "oldText": "alpha",
          "newText": "beta"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed"
      }
    },
    {
      "name": "apply-patch-direct",
      "request": {
        "request_id": "cp3-direct-patch-1",
        "session_id": "cp3-direct",
        "tool_name": "apply_patch",
        "args": {
          "input": "*** Begin Patch\n*** Update File: direct.txt\n@@\n-beta\n+gamma\n*** End Patch"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "direct.txt"
      }
    },
    {
      "name": "read-direct-after-patch",
      "request": {
        "request_id": "cp3-direct-read-2",
        "session_id": "cp3-direct",
        "tool_name": "read",
        "args": {
          "path": "direct.txt"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "gamma"
      }
    },
    {
      "name": "write-sandbox",
      "request": {
        "request_id": "cp3-sandbox-write-1",
        "session_id": "cp3-sandbox",
        "tool_name": "write",
        "args": {
          "path": "sandbox.txt",
          "content": "sandbox-data"
        },
        "sandboxed": true
      },
      "expect": {
        "ok": true,
        "status": "completed"
      }
    },
    {
      "name": "read-sandbox",
      "request": {
        "request_id": "cp3-sandbox-read-1",
        "session_id": "cp3-sandbox",
        "tool_name": "read",
        "args": {
          "path": "sandbox.txt"
        },
        "sandboxed": true
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "sandbox-data"
      }
    },
    {
      "name": "sandbox-path-escape-denied",
      "request": {
        "request_id": "cp3-sandbox-escape-1",
        "session_id": "cp3-sandbox",
        "tool_name": "read",
        "args": {
          "path": "../escape.txt"
        },
        "sandboxed": true
      },
      "expect": {
        "ok": false,
        "errorCode": "path_outside_root"
      }
    },
    {
      "name": "exec-direct",
      "request": {
        "request_id": "cp3-exec-direct-1",
        "session_id": "cp3-exec",
        "tool_name": "exec",
        "args": {
          "command": "echo cp3-exec"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "contains": "cp3-exec"
      }
    },
    {
      "name": "gateway-status",
      "request": {
        "request_id": "cp3-gateway-status-1",
        "session_id": "cp3-gateway",
        "tool_name": "gateway",
        "args": {
          "action": "status"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "capabilities"
      }
    },
    {
      "name": "sessions-send",
      "request": {
        "request_id": "cp3-sessions-send-1",
        "session_id": "cp3-thread-1",
        "tool_name": "sessions",
        "args": {
          "action": "send",
          "message": "hello from sessions"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "cp3-thread-1"
      }
    },
    {
      "name": "sessions-history",
      "request": {
        "request_id": "cp3-sessions-history-1",
        "session_id": "cp3-thread-1",
        "tool_name": "sessions",
        "args": {
          "action": "history"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "hello from sessions"
      }
    },
    {
      "name": "message-default-send",
      "request": {
        "request_id": "cp3-message-send-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "text": "hello from message tool"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "cp3-thread-2"
      }
    },
    {
      "name": "message-send-media-only",
      "request": {
        "request_id": "cp3-message-send-media-1",
        "session_id": "cp3-message-media",
        "tool_name": "message",
        "args": {
          "action": "send",
          "channel": "discord",
          "target": "channel:123",
          "media": [
            "/tmp/parity-a.png",
            "/tmp/parity-b.png"
          ],
          "dryRun": true
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"mediaCount\":2"
      }
    },
    {
      "name": "message-send-missing-payload",
      "request": {
        "request_id": "cp3-message-send-missing-payload-1",
        "session_id": "cp3-message-media",
        "tool_name": "message",
        "args": {
          "action": "send",
          "channel": "discord",
          "target": "channel:123"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-send-unsupported-channel",
      "request": {
        "request_id": "cp3-message-send-unsupported-channel-1",
        "session_id": "cp3-message-media",
        "tool_name": "message",
        "args": {
          "action": "send",
          "channel": "custom-bridge",
          "target": "channel:123",
          "message": "hello"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-react",
      "request": {
        "request_id": "cp3-message-react-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "react",
          "emoji": "✅"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "reactionCount"
      }
    },
    {
      "name": "message-reactions",
      "request": {
        "request_id": "cp3-message-reactions-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "reactions"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "✅"
      }
    },
    {
      "name": "message-edit",
      "request": {
        "request_id": "cp3-message-edit-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "edit",
          "message": "hello from message tool edited"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "editedAt"
      }
    },
    {
      "name": "message-read",
      "request": {
        "request_id": "cp3-message-read-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "read",
          "limit": 5
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "hello from message tool edited"
      }
    },
    {
      "name": "message-permissions",
      "request": {
        "request_id": "cp3-message-permissions-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "permissions"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "threadCreate"
      }
    },
    {
      "name": "message-thread-create",
      "request": {
        "request_id": "cp3-message-thread-create-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "thread-create",
          "threadName": "ops-thread"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "ops-thread"
      }
    },
    {
      "name": "message-thread-reply",
      "request": {
        "request_id": "cp3-message-thread-reply-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "thread-reply",
          "message": "threaded from corpus"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "threaded from corpus"
      }
    },
    {
      "name": "message-thread-list",
      "request": {
        "request_id": "cp3-message-thread-list-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "thread-list"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "ops-thread"
      }
    },
    {
      "name": "message-channel-info",
      "request": {
        "request_id": "cp3-message-channel-info-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "channel-info",
          "target": "channel:123"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "runtime-channel"
      }
    },
    {
      "name": "message-channel-list",
      "request": {
        "request_id": "cp3-message-channel-list-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "channel-list",
          "guildId": "guild-1"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"count\":2"
      }
    },
    {
      "name": "message-role-add",
      "request": {
        "request_id": "cp3-message-role-add-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "role-add",
          "guildId": "guild-1",
          "userId": "user-1",
          "roleId": "role-ops"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"applied\":true"
      }
    },
    {
      "name": "message-member-info",
      "request": {
        "request_id": "cp3-message-member-info-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "member-info",
          "guildId": "guild-1",
          "userId": "user-1"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "role-ops"
      }
    },
    {
      "name": "message-event-create",
      "request": {
        "request_id": "cp3-message-event-create-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "event-create",
          "guildId": "guild-1",
          "eventName": "Release Window",
          "startTime": "2026-02-21T20:00:00Z"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "Release Window"
      }
    },
    {
      "name": "message-event-list",
      "request": {
        "request_id": "cp3-message-event-list-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "event-list",
          "guildId": "guild-1"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"count\":1"
      }
    },
    {
      "name": "message-timeout",
      "request": {
        "request_id": "cp3-message-timeout-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "timeout",
          "guildId": "guild-1",
          "userId": "user-1",
          "durationMin": 30
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"applied\":true"
      }
    },
    {
      "name": "message-kick",
      "request": {
        "request_id": "cp3-message-kick-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "kick",
          "guildId": "guild-1",
          "userId": "user-1"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"action\":\"kick\""
      }
    },
    {
      "name": "message-ban",
      "request": {
        "request_id": "cp3-message-ban-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "ban",
          "guildId": "guild-1",
          "userId": "user-1",
          "deleteDays": 2
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"action\":\"ban\""
      }
    },
    {
      "name": "message-role-remove",
      "request": {
        "request_id": "cp3-message-role-remove-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "role-remove",
          "guildId": "guild-1",
          "userId": "user-1",
          "roleId": "role-ops"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"applied\":true"
      }
    },
    {
      "name": "message-pin",
      "request": {
        "request_id": "cp3-message-pin-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "pin"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"pinned\":true"
      }
    },
    {
      "name": "message-pins",
      "request": {
        "request_id": "cp3-message-pins-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "pins"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"count\":1"
      }
    },
    {
      "name": "message-unpin",
      "request": {
        "request_id": "cp3-message-unpin-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "unpin"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"unpinned\":true"
      }
    },
    {
      "name": "message-delete",
      "request": {
        "request_id": "cp3-message-delete-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "delete"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"deleted\":true"
      }
    },
    {
      "name": "message-poll",
      "request": {
        "request_id": "cp3-message-poll-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "poll",
          "question": "Lunch?",
          "options": [
            "Pizza",
            "Sushi"
          ]
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"poll\""
      }
    },
    {
      "name": "message-poll-telegram-alias",
      "request": {
        "request_id": "cp3-message-poll-telegram-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "poll",
          "channel": "tg",
          "question": "Ship today?",
          "options": [
            "Yes",
            "No"
          ]
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"Ship today?\""
      }
    },
    {
      "name": "message-poll-unsupported-channel",
      "request": {
        "request_id": "cp3-message-poll-unsupported-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "poll",
          "channel": "slack",
          "question": "Ship today?",
          "options": [
            "Yes",
            "No"
          ]
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-thread-unsupported-channel",
      "request": {
        "request_id": "cp3-message-thread-unsupported-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "thread-create",
          "channel": "telegram",
          "threadName": "ops-thread-unsupported"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-permissions-slack-channel",
      "request": {
        "request_id": "cp3-message-permissions-slack-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "permissions",
          "channel": "slack"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"threadCreate\":false"
      }
    },
    {
      "name": "message-permissions-telegram-channel",
      "request": {
        "request_id": "cp3-message-permissions-telegram-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "permissions",
          "channel": "telegram"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"threadCreate\":false"
      }
    },
    {
      "name": "message-role-add-unsupported-channel",
      "request": {
        "request_id": "cp3-message-role-add-unsupported-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "role-add",
          "channel": "telegram",
          "guildId": "guild-a",
          "userId": "user-a",
          "roleId": "role-admin"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-search-seed-discord-channel",
      "request": {
        "request_id": "cp3-message-search-seed-discord-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "send",
          "channel": "discord",
          "message": "deploy checklist ready"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "deploy checklist ready"
      }
    },
    {
      "name": "message-search-discord-channel",
      "request": {
        "request_id": "cp3-message-search-discord-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "search",
          "channel": "discord",
          "query": "deploy"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"action\":\"search\""
      }
    },
    {
      "name": "message-search-unsupported-channel",
      "request": {
        "request_id": "cp3-message-search-unsupported-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "search",
          "channel": "slack",
          "query": "deploy"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-broadcast-discord-channel",
      "request": {
        "request_id": "cp3-message-broadcast-discord-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "broadcast",
          "channel": "discord",
          "targets": [
            "channel:ops",
            "user:123"
          ],
          "message": "maintenance notice"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"action\":\"broadcast\""
      }
    },
    {
      "name": "message-broadcast-all-channels",
      "request": {
        "request_id": "cp3-message-broadcast-all-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "broadcast",
          "channel": "all",
          "target": "ops-room",
          "message": "global notice"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"deliveryCount\":"
      }
    },
    {
      "name": "message-broadcast-missing-target",
      "request": {
        "request_id": "cp3-message-broadcast-missing-target-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "broadcast",
          "channel": "discord",
          "message": "maintenance notice"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-broadcast-media-only",
      "request": {
        "request_id": "cp3-message-broadcast-media-only-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "broadcast",
          "channel": "discord",
          "target": "channel:ops",
          "media": "/tmp/notice.png",
          "dryRun": true
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"dryRun\":true"
      }
    },
    {
      "name": "message-broadcast-missing-payload",
      "request": {
        "request_id": "cp3-message-broadcast-missing-payload-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "broadcast",
          "channel": "discord",
          "target": "channel:ops"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-broadcast-unsupported-channel",
      "request": {
        "request_id": "cp3-message-broadcast-unsupported-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "broadcast",
          "channel": "custom-bridge",
          "target": "ops-room",
          "message": "maintenance notice"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-emoji-list-slack-channel",
      "request": {
        "request_id": "cp3-message-emoji-list-slack-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "emoji-list",
          "channel": "slack"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "white_check_mark"
      }
    },
    {
      "name": "message-emoji-upload-slack-unsupported-channel",
      "request": {
        "request_id": "cp3-message-emoji-upload-slack-unsupported-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "emoji-upload",
          "channel": "slack",
          "guildId": "workspace",
          "emojiName": "ops",
          "media": "/tmp/ops.png"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "message-emoji-upload-discord-channel",
      "request": {
        "request_id": "cp3-message-emoji-upload-discord-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "emoji-upload",
          "channel": "discord",
          "guildId": "guild-ops",
          "emojiName": "opsok",
          "media": "/tmp/opsok.png"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"action\":\"emoji-upload\""
      }
    },
    {
      "name": "message-sticker-upload-discord-channel",
      "request": {
        "request_id": "cp3-message-sticker-upload-discord-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "sticker-upload",
          "channel": "discord",
          "guildId": "guild-ops",
          "stickerName": "ops-sticker",
          "stickerDesc": "Ops sticker",
          "stickerTags": "ops",
          "media": "/tmp/ops-sticker.png"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"action\":\"sticker-upload\""
      }
    },
    {
      "name": "message-sticker-send-discord-channel",
      "request": {
        "request_id": "cp3-message-sticker-send-discord-1",
        "session_id": "cp3-search-discord",
        "tool_name": "message",
        "args": {
          "action": "sticker-send",
          "channel": "discord",
          "target": "channel:123",
          "stickerId": "sticker-1"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"action\":\"sticker-send\""
      }
    },
    {
      "name": "message-sticker-send-slack-unsupported-channel",
      "request": {
        "request_id": "cp3-message-sticker-send-slack-unsupported-1",
        "session_id": "cp3-thread-2",
        "tool_name": "message",
        "args": {
          "action": "sticker-send",
          "channel": "slack",
          "target": "channel:C123",
          "stickerId": "sticker-1"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": false,
        "errorCode": "invalid_args"
      }
    },
    {
      "name": "browser-open",
      "request": {
        "request_id": "cp3-browser-open-1",
        "session_id": "cp3-browser",
        "tool_name": "browser",
        "args": {
          "action": "open",
          "url": "https://example.com"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "browser.proxy"
      }
    },
    {
      "name": "canvas-present",
      "request": {
        "request_id": "cp3-canvas-present-1",
        "session_id": "cp3-canvas",
        "tool_name": "canvas",
        "args": {
          "action": "present",
          "nodeId": "cp3-node-a",
          "view": "default"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "canvas.present"
      }
    },
    {
      "name": "nodes-location-invoke",
      "request": {
        "request_id": "cp3-nodes-location-1",
        "session_id": "cp3-node",
        "tool_name": "nodes",
        "args": {
          "action": "invoke",
          "nodeId": "cp3-node-a",
          "command": "location.get",
          "params": {}
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "location.get"
      }
    },
    {
      "name": "nodes-device-status-invoke",
      "request": {
        "request_id": "cp3-nodes-device-status-1",
        "session_id": "cp3-node",
        "tool_name": "nodes",
        "args": {
          "action": "invoke",
          "nodeId": "cp3-node-a",
          "command": "device.status",
          "params": {}
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"batteryPercent\":100"
      }
    },
    {
      "name": "nodes-canvas-snapshot-invoke",
      "request": {
        "request_id": "cp3-nodes-canvas-snapshot-1",
        "session_id": "cp3-node",
        "tool_name": "nodes",
        "args": {
          "action": "invoke",
          "nodeId": "cp3-node-a",
          "command": "canvas.snapshot",
          "params": {}
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"mimeType\":\"image/png\""
      }
    },
    {
      "name": "nodes-describe",
      "request": {
        "request_id": "cp3-nodes-describe-1",
        "session_id": "cp3-node",
        "tool_name": "nodes",
        "args": {
          "action": "describe",
          "node": "local-node"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"commands\""
      }
    },
    {
      "name": "nodes-notify",
      "request": {
        "request_id": "cp3-nodes-notify-1",
        "session_id": "cp3-node",
        "tool_name": "nodes",
        "args": {
          "action": "notify",
          "node": "local-node",
          "title": "Parity",
          "body": "tool runtime notify"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "\"notificationId\""
      }
    },
    {
      "name": "nodes-run-array",
      "request": {
        "request_id": "cp3-nodes-run-array-1",
        "session_id": "cp3-node",
        "tool_name": "nodes",
        "args": {
          "action": "run",
          "node": "local-node",
          "command": [
            "echo",
            "cp3-nodes-run"
          ],
          "rawCommand": "echo cp3-nodes-run"
        },
        "sandboxed": false
      },
      "expect": {
        "ok": true,
        "status": "completed",
        "contains": "cp3-nodes-run"
      }
    }
  ]
}
