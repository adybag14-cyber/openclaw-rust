{
  "manifestVersion": "1.0.0",
  "schemaVersion": 1,
  "title": "OpenClaw Rust End-to-End Parity Manifest",
  "owners": [
    "adybag14-cyber"
  ],
  "sources": {
    "upstreamRepo": "../openclaw",
    "rustRepo": ".",
    "upstreamGatewayHandlers": "src/gateway/server-methods.ts",
    "rustGatewayMethods": "src/gateway.rs"
  },
  "cp0Gate": {
    "id": "CP0",
    "name": "Parity Contract + Scoreboard Foundation",
    "requirements": [
      {
        "id": "CP0-R1",
        "description": "Versioned parity manifest exists in-repo"
      },
      {
        "id": "CP0-R2",
        "description": "Replay corpus tests are deterministic and executed in CI"
      },
      {
        "id": "CP0-R3",
        "description": "Every PR publishes parity subsystem deltas"
      }
    ]
  },
  "cp1Gate": {
    "id": "CP1",
    "name": "Standalone Rust Gateway Runtime Core",
    "requirements": [
      {
        "id": "CP1-R1",
        "description": "Rust standalone gateway mode serves control-plane RPCs without TypeScript gateway runtime"
      },
      {
        "id": "CP1-R2",
        "description": "Role/scope authorization matrix is enforced at request dispatch boundary"
      },
      {
        "id": "CP1-R3",
        "description": "Event fanout applies bounded backpressure/drop semantics for slow consumers"
      }
    ]
  },
  "cp5Gate": {
    "id": "CP5",
    "name": "Nodes, Browser, Canvas, Device Flows",
    "requirements": [
      {
        "id": "CP5-R1",
        "description": "Browser orchestration parity supports node proxy and browser.open flow with allowlist + timeout/error contracts"
      },
      {
        "id": "CP5-R2",
        "description": "Canvas present flow supports waitable node invoke completion and cancellation semantics"
      },
      {
        "id": "CP5-R3",
        "description": "Node/device command gate fixtures cover pairing, invoke/event, browser/canvas, and declared camera/screen/location/system command routes"
      }
    ]
  },
  "cp6Gate": {
    "id": "CP6",
    "name": "Model Provider + Auth + Failover",
    "requirements": [
      {
        "id": "CP6-R1",
        "description": "Provider alias normalization parity for model references (for example z.ai -> zai, qwen -> qwen-portal)"
      },
      {
        "id": "CP6-R2",
        "description": "Provider-model normalization supports codex and anthropic shorthand canonicalization"
      },
      {
        "id": "CP6-R3",
        "description": "Baseline provider failover chain fixtures are executable and published as CI artifacts"
      },
      {
        "id": "CP6-R4",
        "description": "Model patch parity clears persisted session auth-profile override state when model/provider changes"
      },
      {
        "id": "CP6-R5",
        "description": "Runtime model selection executes provider fallback routing under auth-profile cooldown pressure"
      }
    ]
  },
  "cp7Gate": {
    "id": "CP7",
    "name": "CLI + Control UI Parity",
    "requirements": [
      {
        "id": "CP7-R1",
        "description": "Rust CLI exposes runbook command families (`gateway`, `agent`, `message send`, `nodes`, `sessions`) with parity-compatible argument surfaces"
      },
      {
        "id": "CP7-R2",
        "description": "Rust CLI exposes doctor diagnostics command with deterministic non-interactive output (`doctor --non-interactive`, optional JSON)"
      },
      {
        "id": "CP7-R3",
        "description": "Control-plane update workflow continues to expose doctor follow-up hint in restart sentinel payloads"
      },
      {
        "id": "CP7-R4",
        "description": "CP7 fixtures run in CI and publish gate artifacts"
      }
    ]
  },
  "cp8Gate": {
    "id": "CP8",
    "name": "Reliability + Security Hardening Starter",
    "requirements": [
      {
        "id": "CP8-R1",
        "description": "Replay + soak reliability fixtures execute as a deterministic CP8 gate"
      },
      {
        "id": "CP8-R2",
        "description": "Security regression fixtures for prompt/command/tool-loop/policy-bundle protections execute in CP8 gate"
      },
      {
        "id": "CP8-R3",
        "description": "CP8 fixtures run in CI and publish reliability/security artifact metrics"
      }
    ]
  },
  "artifacts": {
    "methodSurfaceDiffJson": "parity/generated/method-surface-diff.json",
    "methodSurfaceReportMd": "parity/method-surface-report.md",
    "payloadCorpusJson": "tests/parity/gateway-payload-corpus.json",
    "scoreboardJson": "parity/generated/parity-scoreboard.json",
    "scoreboardMarkdown": "parity/generated/parity-scoreboard.md",
    "baselineScoreboardJson": "parity/manifest/scoreboard-baseline.json"
  },
  "deferredSubsystems": [
    "Tool execution host runtime parity",
    "Full node/device runtime host parity"
  ],
  "acceptanceCommands": [
    ".\\scripts\\parity\\method-surface-diff.ps1 -Surface both -UpstreamRepoPath ..\\openclaw",
    ".\\scripts\\parity\\build-scoreboard.ps1",
    ".\\scripts\\parity\\run-replay-corpus.ps1",
    ".\\scripts\\parity\\run-cp1-gate.ps1",
    ".\\scripts\\parity\\run-cp5-gate.ps1",
    ".\\scripts\\parity\\run-cp6-gate.ps1",
    ".\\scripts\\parity\\run-cp7-gate.ps1",
    ".\\scripts\\parity\\run-cp8-gate.ps1"
  ]
}
